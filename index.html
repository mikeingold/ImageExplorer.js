<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Explorer</title>
    <link rel="stylesheet" href="styles.css">
    <script src="d3.min.js"></script>
</head>
<body>
    <header id="banner">
        <span>mikeingold.github.io</span>
    </header>

    <div id="container">
        <svg id="map-viewer"></svg>
    </div>
    
    <div class="tooltip" id="tooltip">
        <h3 id="tooltip-title"></h3>
        <p id="tooltip-description"></p>
    </div>

    <!-- Hidden file input for image upload -->
    <input type="file" id="image-upload" class="image-upload" accept="image/*">

    <!-- Dev mode toggle button - bottom-left corner -->
    <button class="round-btn" id="dev-mode-toggle" title="Developer Tools">
        <span><img src="assets/icon_dev.svg" /></span>
    </button>

    <!-- Dev mode controls panel - appears when dev mode is active -->
    <div id="dev-controls" class="dev-controls">
        <span class="dev-mode-label">Developer Tools</span>
        <button id="load-image-btn"><img src="assets/icon_addphoto.svg" /> Load New Image</button>
        <button id="trace-btn"><img src="assets/icon_trace.svg" /> Trace a Feature</button>
    </div>

    <!-- Reset button - bottom-right, left of zoom controls -->
    <button class="round-btn" id="reset-btn" title="Reset Workspace">
        <span><img src="assets/icon_refresh.svg" /></span>
    </button>

    <!-- Upper/Lower Buttons  -->
    <div class="view-controls">
        <button class="round-btn view-btn active" id="upper-view-btn" title="Upper View">
            <span><img src="assets/icon_plane.svg" /></span>
        </button>
        <button class="round-btn view-btn" id="lower-view-btn" title="Lower View">
            <span><img src="assets/icon_plane.svg" style="transform: rotate(180deg);" /></span>
        </button>
    </div>

    <!-- Zoom control buttons in bottom-right -->
    <div class="zoom-controls">
        <button class="round-btn" id="zoom-in-btn" title="Zoom In">
            <span><img src="assets/icon_zoomin.svg" /></span>
        </button>
        <button class="round-btn" id="zoom-out-btn" title="Zoom Out">
            <span><img src="assets/icon_zoomout.svg" /></span>
        </button>
    </div>

    <!-- Tracing action buttons above dev tools -->
    <div id="tracing-controls">
        <button class="round-btn" id="finish-tracing-btn" title="Finish Tracing">
            <span><img src="assets/icon_check.svg" /></span>
        </button>
        <button class="round-btn" id="cancel-tracing-btn" title="Cancel Tracing">
            <span><img src="assets/icon_x.svg" /></span>
        </button>
    </div>

    <!-- Polygon Info Panel -->
    <div id="polygon-std-info-panel" class="polygon-info-panel">
        <h2>
            <span>Feature Info</span>
        </h2>
        <label>ID</label>
            <input type="text" id="polygon-id" readonly>
        <label>Name</label>
            <input type="text" id="polygon-name" readonly>
        <label>Description</label>
            <textarea type="text" id="polygon-description" readonly></textarea>
    </div>

    <!-- Polygon (User-Generated) Info Panel -->
    <div id="polygon-user-info-panel" class="polygon-info-panel">
        <h2>
            <span>Feature Info</span>
            <span id="json-copy-icon" title="Copy JSON to Clipboard"><span><img id="img-copy-icon" src="assets/icon_copy.svg" /></span></span>
        </h2>
        <label>ID</label>
            <input type="text" id="user-polygon-id" placeholder="new-id">
        <label>Name</label>
            <input type="text" id="user-polygon-name" placeholder="New Feature Name">
        <label>Description</label>
            <textarea id="user-polygon-description" class="long" placeholder="New feature description"></textarea>
        <label>JSON Data</label>
            <textarea id="user-polygon-json" class="mono long" readonly></textarea>
        <div class="modal-buttons">
            <button class="danger" id="discard-polygon-btn">Discard</button>
        </div>
    </div>

    <!-- Reset confirmation modal -->
    <div id="reset-modal">
        <div id="reset-modal-content">
            <h2>Confirm Reset</h2>
            <p style="margin-bottom: 20px; line-height: 1.6;">This will reset the view and delete all user-generated polygons. This action cannot be undone.</p>
            <div class="modal-buttons">
                <button class="danger" id="confirm-reset-btn">Reset Everything</button>
                <button class="secondary" id="cancel-reset-btn">Cancel</button>
            </div>
        </div>
    </div>

    <script src="map.js"></script>
    <script src="utils.js"></script>
    <script src="app.js"></script>
</body>
</html>